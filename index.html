<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador de Personas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        #bienvenido {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 3em;
            justify-content: center;
            align-items: center;
            display: flex;
        }
        #contador {
            font-size: 2em;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="bienvenido">
        ¡Bienvenido!
    </div>
    <h1>Personas contadas: <span id="contador">{{ count }}</span></h1>
    <p>Presiona el botón conectado al pin GPIO 17 para incrementar el contador.</p>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        // Función para actualizar el contador y verificar si el botón fue presionado
        function actualizarContador() {
            $.get("/get_count", function(data) {
                $("#contador").text(data.count);

                // Mostrar el mensaje de bienvenida si el botón fue presionado
                if (data.button_pressed) {
                    $("#bienvenido").fadeIn();
                    // Después de 2 segundos, ocultamos el mensaje de bienvenida
                    setTimeout(function() {
                        $("#bienvenido").fadeOut();
                        $.get("/reset_button");  // Reseteamos el estado del botón
                    }, 2000);
                }
            });
        }

        // Llamamos a la función para actualizar el contador cada 1 segundo
        setInterval(actualizarContador, 1000);
    </script>
</body>
</html>